@model Application.Service.ConnectorDetailVM
    @using Application.Service
@{
    ViewBag.Title = "Connector Documents";
}

    <div class="form-horizontal" style="padding: 0px; margin-top: 10px">
        <nav class="navbar navbar-light bg-light justify-content-between">
            <a class="navbar-brand" href="#">DOCUMENTS applicable to connector @ViewData.Model.Code  </a>

            <form class="form-inline">

                <button onclick="OpenAddExistingModal()" class="btn btn-outline-primary my-2 my-sm-0" type="button">Add Existing</button>
                <button class="btn btn-outline-primary my-2 my-sm-0" type="button">Add New</button>
                <button onclick="RemoveDocuments()" class="btn btn-outline-primary my-2 my-sm-0" type="button">Remove</button>
            </form>

        </nav>
        @*<div class="row">
            <div class="col-sm-12">
                <table class="table table-bordered" id="ConnectorDocumentsTable" style="width:100%">
                    <thead class="thead-light">
                        <tr>
                            <th>ID</th>
                            <th>NUMBER</th>
                            <th>TITLE</th>
                            <th>CATEGORY</th>
                            <th>REV</th>
                        </tr>
                    </thead>
                    @if (ViewData.Model.Documents == null)
                    {
                        <tr>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                            <td>-</td>
                        </tr>

                    }
                    else
                    {
                        foreach (var d in ViewData.Model.Documents)
                        {
                            <text>
                                <tr>
                                    <td style="display:none;">@d.Id</td>
                                    <td>@d.Code</td>
                                    <td>@d.Title</td>
                                    <td>@d.DocType</td>
                                    <td>@d.Rev</td>
                                </tr>
                            </text>
                        }
                    }
                </table>
            </div>
        </div>*@
        @CammGrid.SimpleGrid(this, new DocumentListVM(), "ConnectorDocsGrid", "/Connector/GetDocuments", ViewData.Model.Id.ToString())
    </div>



@CammPopup.LinkDocuments(this, "LinkDocumentsPopup")

<script>

    var connectorid = @ViewData.Model.Id;
    var table = "";

    function OpenAddExistingModal() {
        $('#exampleModalCenter').modal('show');
    }

    function LinkDocumentsPopup_HandleDocumentsLinked() {
        ConnectorDocsGrid.refresh();
    }

    function RemoveDocuments() {
        
        var rows = ConnectorDocsGrid.GetSelectedRows();
        if (rows.length === 0)
            return;
        
        var ids = [];
        for (i = 0; i < rows.length; i++) {
            ids.push(rows[i].Id);
        }
               
        $.ajax({
            "url": "RemoveDocuments",
            "data": $.param({ connectorId: connectorid, documentIdList: ids }, true),
            "success": function (result) {
                ConnectorDocsGrid.refresh()
            }
        });              
    }
       
    $(document).ready(function () {
        
    });
       
</script>

<style>
    table, th, td {
        border: 1px solid black;
    }

    .form-inline > * {
        margin: 5px 3px;
    }
</style>


